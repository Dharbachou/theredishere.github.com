var $body;$(document).ready(function(){function a(e){var n,t=$(".modal_container").filter(e);$("#overlay").length||($body.append('<div id="overlay"></div>'),setTimeout(function(){$("#overlay").fadeIn(600)},200)),$(".aroundCbox").length||($body.append('<div class="aroundCbox"></div>'),n=$(".aroundCbox"),n.show(),t.appendTo(n),setTimeout(function(){t.addClass("modal_container_open")},200)),i=!0,l(),r()}function s(){$("#overlay").fadeOut(function(){$(this).remove()});var e=$(".modal_container_open");e.removeClass("modal_container_open"),i=!1,setTimeout(function(){$(".aroundCbox").replaceWith(e),$("html").css("overflow-y","scroll"),$("body").css("marginRight",0)},200)}function r(){$(document).on(t,function(e){$(e.target).find(".modal_container").length&&s()})}function l(){var e=$("body"),t=e.outerWidth(!0),n=$("html"),o=n.scrollTop();n.css("overflow-y","hidden");var i=e.outerWidth(!0);e.css("margin-right",i-t+"px"),n.scrollTop(o)}$body=$("body");var e=$(".main_menu"),t="touchstart click",n=function(){e.removeClass("main_menu_open"),$body.removeClass("menu_open")},o=function(e){$(e.target).parents(".main_menu, .menu_link").length||(n(),$(document).off(t,o))};$body.on(t,".menu_link",function(n){n.preventDefault(),e.hasClass("main_menu_open")?(e.removeClass("main_menu_open"),$body.removeClass("menu_open")):(e.addClass("main_menu_open"),$body.addClass("menu_open"),$(document).on(t,o))}),$body.on("click",".show_more_link_about",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top},1e3,"swing")}),$body.on("click",".tab_link",function(e){e.preventDefault();var i,t=$(this),n=t.parent(),o=t.attr("href");if(i=n.closest(".section_nav").length?n.closest(".section_nav").next(".tab_container"):n.closest(".tab_links").next(".tab_container"),!n.hasClass("active")&&(n.siblings().removeClass("active"),n.addClass("active"),i.find(".tab_content").hide().filter(o).fadeIn(),t.closest(".section_tab_container").length)){var a=t.closest(".section_tab_container").offset().top;$("html, body").animate({scrollTop:a},400)}}),$body.on("click",".more_review",function(e){e.preventDefault();var t=$(this),n=t.parent().prev(".reviews_list");t.parent().hide(),n.find(".hidden").removeClass("hidden")}),$body.on("click",".main_menu_link",function(e){e.preventDefault();var t=$(this),n=t.attr("href");t.hasClass("popup_open")||$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top},1e3,"swing",function(){window.location.hash=n})}),$body.on("click",".show_more_link_nav",function(e){e.preventDefault();var t=$(this),n=t.data("section"),o=t.closest(".section_brif_nav"),i=o.next(".section_tab_container").find(".section_nav");$("html, body").animate({scrollTop:i.offset().top+"px"},1e3,"swing"),i.find('a[href="#'+n+'"]').click()}),$body.on("mouseover",".review_one",function(){var e=$(this),t=e.siblings(".review_text");t.is(":hidden")&&t.fadeIn()}).on("mouseleave",".review_one",function(){$(".review_text").fadeOut()}),$(".client_logo_helper").each(function(){var e=$(this),t=e.closest(".client_logo_container").next(".client_text").html();e.tooltipster({trigger:"hover",contentAsHTML:!0,theme:"tooltip_white",arrowColor:"#ffffff",position:"bottom",offsetX:"-15px",offsetY:"-5px",content:t,autoClose:!0,delay:50})}),$("#form_order").validate({focusInvalid:!1,rules:{name:{required:!0},company:{required:!0},position:{required:!0},email:{required:!0,email:!0},phone:{required:!0},message:{required:!0}},messages:{email:{required:"Укажите адрес электронной почты!",email:"Неправильный формат электронной почты!"}},errorElement:"span",errorClass:"error_text",errorPlacement:function(e,t){t.is("#email")&&e.insertAfter(t)},highlight:function(e){$(e).addClass("textInput_error")},unhighlight:function(e){$(e).removeClass("textInput_error")},submitHandler:function(e){$(e).find(".btn_send").hasClass("btn_send_sended")||$(e).find(".btn_send").addClass("btn_send_sended"),$.ajax({url:"form",data:$(e).serialize(),type:"POST"}).done(function(e){e.status&&($(".modal_order").addClass("modal_container_success"),"undefined"!=typeof ga&&ga("send","event","form","send"),"undefined"!=typeof yaCounter20921035&&yaCounter20921035.reachGoal("form_send"))})}}),$body.on(t,".popup_open",function(e){e.preventDefault(),"undefined"!=typeof ga&&ga("send","event","form","open"),"undefined"!=typeof yaCounter20921035&&yaCounter20921035.reachGoal("form_open"),a($(this).attr("href"))}),$body.on(t,".modal_close",function(e){e.preventDefault(),"undefined"!=typeof ga&&ga("send","event","form","close"),"undefined"!=typeof yaCounter20921035&&yaCounter20921035.reachGoal("form_close"),s()}),$body.on("click",".show_more_link_partners",function(e){e.preventDefault();var t=$(this),n=t.attr("href"),o=$("#partners_container");$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top},1e3,"swing",function(){window.location.hash=n}),setTimeout(function(){o.find(".section_nav").show(),o.find(".tab_container").slideDown()},1e3)});var i=!1;$(window).on("unload",function(){i&&("undefined"!=typeof ga&&ga("send","event","form","close"),"undefined"!=typeof yaCounter20921035&&yaCounter20921035.reachGoal("form_close"))}),$body.on("click",".to_top_link",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},800)});var c,f=$(".section_nav"),d=$(".to_top_link"),_=$(".section_anchor");window.onscroll=function(){c=window.pageYOffset||document.documentElement.scrollTop,c=parseInt(c),f.each(function(){var e=$(this),t=e.offset().top,n=e.find(".nav_inner"),o=e.closest(".section_tab_container").nextAll(".reset_nav").offset().top;c>=t&&o>c?n.addClass("nav_inner_fix"):n.removeClass("nav_inner_fix")}),c>800?d.fadeIn(400):d.fadeOut(400);var t=$(".bg_change");t.each(function(){var n,e=$(this),o=parseInt(e.offset().top)-110;c>=o?(t.removeClass("bg_active"),e.addClass("bg_active"),n=$body.find(".bg_active").data("bg"),"bg_white"==n?$body.removeClass("bg_black").addClass(n):$body.removeClass("bg_white").addClass(n)):140>=c&&$body.removeClass("bg_white bg_black")}),_.each(function(){var t=$(this).attr("id"),n=parseInt($(this).offset().top);c+100>=n&&(e.find("li").removeClass("active"),e.find("a[href*="+t+"]").parent().addClass("active"))})}});